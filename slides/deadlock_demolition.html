<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>
        
        Deadlock Demolotion | CS 341: System Programming
        
    </title>

    <meta name="author" content="" />

    <!-- Description -->
    
    <meta name="description" content=""Webpage for CS 341: System Programming at the University of Illinois at Urbana-Champaign. All documentation and information about the course can be found here."
">
    

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/css/reveal.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/css/theme/black.css" id="theme"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="/css/code-style.css"/>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '/reveal.js/css/print/pdf.css' : '/reveal.js/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!-- <link rel="apple-touch-icon" href="/apple-touch-icon.png" /> -->

    <link rel="canonical" href="http://cs341.cs.illinois.edu/slides/deadlock_demolition">

    <style>
     .reveal pre {
         box-shadow: none;
     }
     .reveal pre.highlight {
         margin: 0px 0px 0px 0px;
         width: 100%;
         height: 100%;
         font-size: 20px;
     }
     #toggle-chalkboard {
	       left: 60px !important;
	       bottom: 32px !important;
     }
     #toggle-notes {
	       left: 93px !important;
	       bottom: 32px !important;
     }
    </style>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="reveal">
        <div class="slides">
<section>
      <h1 class="title">Deadlock Demolotion</h1>
      <h2 class="author"></h2>
</section><section><h1></h1>
<section><h2 id="deadlock">Deadlock</h2>

</section><section><h2></h2>

<p><img src="/images/assignment-docs/lab/slides/dining/traffic.gif" alt="Traffic Jam"></p>

</section><section><h2 id="dining-philosophers">Dining philosophers</h2>

<p>A good example of deadlock is the dining philosophers problem. In this problem, there are <em>n</em> philosophers trying to have dinner with <em>n</em> chopsticks. Each requires two chopsticks to eat. How can we allocate the chopsticks such that every philosopher gets to eat?</p>

<p><img src="/images/assignment-docs/lab/slides/dining/dining.gif" alt="Deadlock Dining"></p>

</section><section><h2 id="whos-a-good-dining-philosopher">Who’s a good dining philosopher?</h2>

<p><img src="/images/assignment-docs/lab/slides/dining/dogdining.gif" alt="Dog Philosopher"></p>

</section></section><section><h1></h1>

<section><h2 id="what-is-deadlock">What is deadlock?</h2>

<p>From wikipedia:</p>
<blockquote>
  <p>In an operating system, a deadlock occurs when a process or thread enters a waiting state because a requested system resource is held by another waiting process, which in turn is waiting for another resource held by another waiting process.</p>
</blockquote>

</section></section><section><h1></h1>

<section><h2 id="resource-allocation-graph">Resource allocation graph</h2>

<p>We can model resource allocation by having resources and processes represented as vertices
and use edges to show ownership of a resource. A cycle in the (undirected)
resource allocation graph implies that we have deadlock.</p>

</section><section><h2 id="example-rag">Example RAG</h2>

<p><img src="/images/assignment-docs/lab/slides/dining/rag.png" alt="Deadlock RAG"></p>

</section></section><section><h1></h1>

<section><h2 id="solutions-to-the-dining-philsophers-problem">Solutions to the dining philsophers problem</h2>

</section></section><section><h1></h1>

<section><h2 id="arbitrator">Arbitrator</h2>

</section><section><h2></h2>

<p>Have one authority (e.g. a mutex). Have each philosopher grab that authority and only when they have the authority can they pick up their forks and eat. They eat, put the arbitrator and the forks down and move on to the next philosopher (can be random or sequential).</p>

</section><section><h2 id="downsides">Downsides</h2>

<ul>
  <li>Very slow</li>
  <li>Only one thread running at a time</li>
  <li>Python’s global interpreter lock is implemented this way</li>
</ul>

</section></section><section><h1></h1>

<section><h2 id="leave-the-table-stallings">Leave the table (Stallings)</h2>

</section><section><h2></h2>

<p>Consider the case of the dining philosophers with <em>n</em>-chopsticks and <em>n</em>-philosophers. Reduce the number of philosophers currently allowed at the table to <em>n-1</em> using a semaphore. Have them eat. Cycle out the philosophers.</p>

</section><section><h2 id="downsides-1">Downsides</h2>

<ul>
  <li>Very heavy on context switches for a process</li>
  <li>Needs way of “pausing” a philosopher (SIGSTOP for linux kernel)</li>
  <li>Need a “fair” cycling algorithm</li>
</ul>

</section></section><section><h1></h1>

<section><h2 id="partial-ordering-dijkstra">Partial Ordering (Dijkstra)</h2>

</section><section><h2></h2>

<p>Order the chopsticks <em>1..n</em>. For each philosopher have them pick up the lower number chopstick. Then, only if they can pick up the lower chopstick, pick up the higher chopstick. Why does this work?</p>

</section><section><h2 id="downsides-2">Downsides</h2>

<ul>
  <li>Needs to be able to order the resources</li>
  <li>Doesn’t livelock but often leads one thread working at a time for large applications (databases)</li>
  <li>But good for dining philosophers!</li>
</ul>

</section></section><section><h1></h1>

<section><h2 id="cleandirty-chandramisra">Clean/Dirty (Chandra/Misra)</h2>

</section><section><h2></h2>

<p>If you want reeealllllllly fast (given a lot of philosophers numbered <em>1..n</em>).</p>

<p>Chopsticks can be dirty or clean. Initially all chopsticks start out as dirty. For each pair of philosophers, assign the chopstick between them to the philosopher with the lower id. When a philosopher wants to eat, they ask the person next to them for a chopstick. If the neighbor’s chopstick is clean (they haven’t eaten yet), they keep the chopstick. Otherwise, they clean it, and give it to the requesting philosopher. This prevents starvation of philosophers and ensures priority is given to the philosopher that has least recently eaten.</p>

</section></section><section><h1></h1>

<section><h2 id="a-good-overview-of-solutions">A good overview of solutions</h2>

<p><a href="http://adit.io/posts/2013-05-11-The-Dining-Philosophers-Problem-With-Ron-Swanson.html">Read the Ron Swanson version here</a></p>

</section></section><section><h1></h1>

<section><h2 id="questions">Questions?</h2>

</section></section>
</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/lib/js/head.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/js/reveal.js"></script>
    <script>
     // Full list of configuration options available at:
     // https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
         controls: true,
         progress: true,
         history: true,
         center: true,
         // Optional reveal.js plugins
         dependencies: [
             { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
             { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/plugin/zoom-js/zoom.js', async: true },
             { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.7.0/plugin/notes/notes.js', async: true },
             { src: '/js/reveal.js/menu/menu.js', async: true},
             { src: '/js/reveal.js/chalkboard/chalkboard.js', async: true},
         ]
     });

    </script>
  </body>
</html>
